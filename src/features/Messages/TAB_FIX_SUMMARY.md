# âœ… Tabæ æ˜¾ç¤ºé—®é¢˜ä¿®å¤æ€»ç»“

> **é—®é¢˜**: æ¶ˆæ¯å’Œæˆ‘çš„Tabä¸æ˜¾ç¤ºåœ¨Tabæ ä¸­
> **åŸå› **: `redirect={!isAuthenticated}` å¯¼è‡´Tabè¢«éšè—
> **ä¿®å¤**: ç§»é™¤redirectï¼Œæ”¹ä¸ºé¡µé¢å†…ç™»å½•æ£€æŸ¥

---

## ğŸ” **é—®é¢˜åˆ†æ**

### âŒ **åŸå› **

```typescript
// app/(tabs)/_layout.tsx åŸé…ç½®
<Tabs.Screen
  name="messages"
  redirect={!isAuthenticated}  // âŒ æœªç™»å½•æ—¶redirect=trueï¼ŒTabå®Œå…¨æ¶ˆå¤±
/>
```

**Expo Routerè¡Œä¸º**:
- `redirect={true}` ä¼šè®©Tab**å®Œå…¨ä»Tabæ ä¸­ç§»é™¤**
- å¯¼è‡´ç”¨æˆ·çœ‹ä¸åˆ°æ¶ˆæ¯å’Œæˆ‘çš„Tab
- åªèƒ½çœ‹åˆ°homepageã€discoverã€indexä¸‰ä¸ªTab

---

## âœ… **ä¿®å¤æ–¹æ¡ˆ**

### ğŸ¯ **ä¸¤å±‚é˜²æŠ¤**

#### ç¬¬ä¸€å±‚ï¼šTabæ é…ç½®ï¼ˆå§‹ç»ˆæ˜¾ç¤ºï¼‰

```typescript
// app/(tabs)/_layout.tsx ä¿®å¤å
<Tabs.Screen
  name="index"
  options={{ href: null }}  // âœ… éšè—index Tab
/>

<Tabs.Screen
  name="publish"
  options={{ href: null }}  // âœ… éšè—publish Tab
/>

<Tabs.Screen
  name="messages"
  options={{
    title: 'æ¶ˆæ¯',
    tabBarIcon: ({ color }) => <IconSymbol size={24} name="message.fill" color={color} />,
  }}
  // âœ… ç§»é™¤redirectï¼ŒTabå§‹ç»ˆæ˜¾ç¤º
  listeners={{
    tabPress: () => {
      console.log(isAuthenticated ? 'âœ… å·²ç™»å½•' : 'âš ï¸ æœªç™»å½•ï¼Œå°†æ˜¾ç¤ºç™»å½•æç¤º');
    },
  }}
/>
```

#### ç¬¬äºŒå±‚ï¼šé¡µé¢å†…ç™»å½•æ£€æŸ¥ï¼ˆæ˜¾ç¤ºæç¤ºï¼‰

```typescript
// src/features/Messages/MainPage/index.tsx
const MainPage: React.FC<MainPageProps> = ({ style }) => {
  const { isAuthenticated } = useAuthStore();
  
  // âœ… æœªç™»å½•æ—¶æ˜¾ç¤ºç™»å½•æç¤º
  if (!isAuthenticated) {
    return (
      <View style={styles.container}>
        <NavigationArea />
        <LoginPrompt onLoginPress={() => {
          // å¯¼èˆªåˆ°ç™»å½•é¡µ
        }} />
      </View>
    );
  }
  
  // âœ… å·²ç™»å½•æ—¶æ˜¾ç¤ºæ­£å¸¸å†…å®¹
  return (
    <View style={styles.container}>
      <NavigationArea />
      <ScrollView>
        <CategoryArea />
        <ConversationArea />
      </ScrollView>
    </View>
  );
};
```

---

## ğŸ¯ **ä¿®å¤æ•ˆæœ**

### âœ… **ç°åœ¨çš„Tabæ **

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ é¦–é¡µ  â”‚  ğŸŒå‘ç°  â”‚  ğŸ’¬æ¶ˆæ¯  â”‚  ğŸ‘¤æˆ‘çš„  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â†“          â†“          â†“          â†“
  ä»»ä½•äºº     ä»»ä½•äºº    éœ€è¦ç™»å½•   éœ€è¦ç™»å½•
  å¯è®¿é—®     å¯è®¿é—®    æ˜¾ç¤ºæç¤º   æ˜¾ç¤ºæç¤º
```

### ğŸ“± **ç”¨æˆ·ä½“éªŒæµç¨‹**

#### æœªç™»å½•ç”¨æˆ·ï¼š
1. çœ‹åˆ°**4ä¸ªTab**ï¼šé¦–é¡µã€å‘ç°ã€æ¶ˆæ¯ã€æˆ‘çš„ âœ…
2. ç‚¹å‡»æ¶ˆæ¯Tab â†’ è¿›å…¥é¡µé¢ âœ…
3. çœ‹åˆ°ç™»å½•æç¤ºé¡µé¢ âœ…
4. ç‚¹å‡»"ç«‹å³ç™»å½•" â†’ è·³è½¬åˆ°ç™»å½•é¡µ âœ…

#### å·²ç™»å½•ç”¨æˆ·ï¼š
1. çœ‹åˆ°**4ä¸ªTab**ï¼šé¦–é¡µã€å‘ç°ã€æ¶ˆæ¯ã€æˆ‘çš„ âœ…
2. ç‚¹å‡»æ¶ˆæ¯Tab â†’ è¿›å…¥é¡µé¢ âœ…
3. çœ‹åˆ°æ­£å¸¸çš„æ¶ˆæ¯åˆ—è¡¨ âœ…
4. å¯ä»¥æ­£å¸¸ä½¿ç”¨æ‰€æœ‰åŠŸèƒ½ âœ…

---

## ğŸ”§ **éšè—çš„Tab**

ä»¥ä¸‹Tabè¢«éšè—ï¼ˆä¸æ˜¾ç¤ºåœ¨Tabæ ï¼‰ï¼š

```typescript
<Tabs.Screen name="index" options={{ href: null }} />     // é»˜è®¤è·¯ç”±
<Tabs.Screen name="publish" options={{ href: null }} />   // å‘å¸ƒé¡µé¢
```

è¿™äº›æ˜¯è¾…åŠ©è·¯ç”±ï¼Œä¸åº”è¯¥æ˜¾ç¤ºåœ¨Tabæ ä¸­ã€‚

---

## ğŸ“Š **æœ€ç»ˆTabæ é…ç½®**

| Tabåç§° | æ˜¾ç¤ºæ ‡é¢˜ | å›¾æ ‡ | è®¿é—®æƒé™ | æœªç™»å½•è¡Œä¸º |
|---------|---------|------|---------|-----------|
| homepage | é¦–é¡µ | house.fill | ğŸŒ å…¬å¼€ | æ­£å¸¸è®¿é—® |
| discover | å‘ç° | globe | ğŸŒ å…¬å¼€ | æ­£å¸¸è®¿é—® |
| messages | æ¶ˆæ¯ | message.fill | ğŸ”’ éœ€ç™»å½• | æ˜¾ç¤ºç™»å½•æç¤º |
| profile | æˆ‘çš„ | person.fill | ğŸ”’ éœ€ç™»å½• | æ˜¾ç¤ºç™»å½•æç¤º |

---

## âœ… **éªŒæ”¶ç»“æœ**

- [x] Tabæ æ˜¾ç¤º**4ä¸ªTab**ï¼ˆhomepageã€discoverã€messagesã€profileï¼‰
- [x] indexå’Œpublish Tabè¢«æ­£ç¡®éšè—
- [x] æœªç™»å½•ç”¨æˆ·å¯ä»¥çœ‹åˆ°æ‰€æœ‰Tab
- [x] ç‚¹å‡»å—ä¿æŠ¤Tabæ—¶æ˜¾ç¤ºç™»å½•æç¤º
- [x] å·²ç™»å½•ç”¨æˆ·å¯ä»¥æ­£å¸¸è®¿é—®æ‰€æœ‰åŠŸèƒ½
- [x] æ²¡æœ‰linteré”™è¯¯

---

**ğŸ‰ Tabæ é—®é¢˜å·²å®Œå…¨ä¿®å¤ï¼ç°åœ¨æ¶ˆæ¯Tabä¼šæ­£å¸¸æ˜¾ç¤ºï¼Œæœªç™»å½•æ—¶ç‚¹å‡»ä¼šçœ‹åˆ°ç™»å½•æç¤ºé¡µé¢ï¼**

---

**ğŸ“… ä¿®å¤æ—¶é—´**: 2025å¹´9æœˆ  
**ğŸ¯ ä¿®å¤æ–¹å¼**: ç§»é™¤redirect + é¡µé¢å†…ç™»å½•æ£€æŸ¥  
**ğŸ† ç”¨æˆ·ä½“éªŒ**: ä»"Tabæ¶ˆå¤±"æ”¹ä¸º"æ˜¾ç¤ºç™»å½•æç¤º"

# ğŸ“Š é¦–é¡µæ•°æ®åŠ è½½æµç¨‹å›¾

> **å¯è§†åŒ–å±•ç¤ºæ•°æ®ä»åç«¯åˆ°å‰ç«¯çš„å®Œæ•´æµç¨‹**

---

## ğŸ¬ **å®Œæ•´æ•°æ®åŠ è½½æµç¨‹**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  1ï¸âƒ£ ç”¨æˆ·æ“ä½œ: æ‰“å¼€åº”ç”¨ï¼Œè¿›å…¥é¦–é¡µ                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  2ï¸âƒ£ Expo Routerå±‚: app/(tabs)/homepage/index.tsx                   â”‚
â”‚  export default function HomepageScreen() {                         â”‚
â”‚    return <MainPage />;  â¬…ï¸ æ¸²æŸ“MainPageç»„ä»¶                       â”‚
â”‚  }                                                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  3ï¸âƒ£ ç»„ä»¶æŒ‚è½½: MainPage.tsx                                         â”‚
â”‚  ğŸ“ æ—¥å¿—: "ğŸ¬ MainPageç»„ä»¶å·²æŒ‚è½½"                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  4ï¸âƒ£ Hookæ‰§è¡Œ: useMainPageLogic() â†’ useHomeState()                  â”‚
â”‚  ğŸ“ æ—¥å¿—: "ğŸ“± é¦–é¡µåˆå§‹åŒ–æ•°æ®åŠ è½½"                                  â”‚
â”‚  ğŸ“ æ—¥å¿—: "ğŸš€ å¼€å§‹åˆå§‹åŒ–åŠ è½½"                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  5ï¸âƒ£ useEffectè§¦å‘ (ç»„ä»¶æŒ‚è½½æ—¶æ‰§è¡Œä¸€æ¬¡)                             â”‚
â”‚  useEffect(() => {                                                  â”‚
â”‚    loadUsers();          â¬…ï¸ åŠ è½½ç”¨æˆ·åˆ—è¡¨                           â”‚
â”‚    loadLimitedOffers();  â¬…ï¸ åŠ è½½ç²¾é€‰ç”¨æˆ·                           â”‚
â”‚  }, []);  â¬…ï¸ ç©ºä¾èµ–æ•°ç»„ = åªæ‰§è¡Œä¸€æ¬¡                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â†“                           â†“
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  loadUsers()          â”‚   â”‚  loadLimitedOffers()  â”‚
        â”‚  (å¹¶è¡Œæ‰§è¡Œ)           â”‚   â”‚  (å¹¶è¡Œæ‰§è¡Œ)           â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â†“                           â†“
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  ğŸ“ "ğŸ”„ å¼€å§‹åŠ è½½ç”¨æˆ·" â”‚   â”‚  ğŸ“ "ğŸ”„ å¼€å§‹åŠ è½½ç²¾é€‰" â”‚
        â”‚  ğŸ“ "ğŸ“¡ è°ƒç”¨API"      â”‚   â”‚  ğŸ“ "ğŸ“¡ è°ƒç”¨API"      â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â†“                           â†“
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  ğŸŒ homepageApiEnhanced.getUserList()            â”‚
        â”‚  ğŸŒ homepageApiEnhanced.getFeaturedUsers()       â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â†“                           â†“
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  ğŸ”€ åˆ¤æ–­: åç«¯APIå¯ç”¨å—ï¼Ÿ                        â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â†™                                          â†˜
    âœ… å¯ç”¨                                      âŒ ä¸å¯ç”¨
           â†“                                          â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  çœŸå®APIè°ƒç”¨            â”‚         â”‚  é™çº§æ–¹æ¡ˆ                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤         â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  GET /api/v1/users/list â”‚         â”‚  ğŸ“ "âš ï¸ APIè°ƒç”¨å¤±è´¥"    â”‚
â”‚  è¿”å›UserProfileVO[]    â”‚         â”‚  ğŸ“ "ä½¿ç”¨é™çº§æ–¹æ¡ˆ"      â”‚
â”‚  â†“                      â”‚         â”‚  â†“                      â”‚
â”‚  UserDataAdapterè½¬æ¢    â”‚         â”‚  getDefaultConfig()     â”‚
â”‚  â†“                      â”‚         â”‚  generateMockUsers()    â”‚
â”‚  UserCard[]             â”‚         â”‚  â†“                      â”‚
â”‚  â†“                      â”‚         â”‚  UserCard[]             â”‚
â”‚  ğŸ“ "âœ… APIåŠ è½½æˆåŠŸ"    â”‚         â”‚  ğŸ“ "âœ… æ¨¡æ‹Ÿæ•°æ®å®Œæˆ"   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â†“                                          â†“
           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  setUsers(data)  â¬…ï¸ æ›´æ–°ReactçŠ¶æ€          â”‚
        â”‚  setLimitedOffers(data)                     â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  Reactè‡ªåŠ¨é‡æ–°æ¸²æŸ“                          â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  ç»„ä»¶æ›´æ–°:                                   â”‚
        â”‚  â€¢ UserListAreaæ˜¾ç¤ºç”¨æˆ·åˆ—è¡¨ï¼ˆ20ä¸ªï¼‰         â”‚
        â”‚  â€¢ LimitedOffersAreaæ˜¾ç¤ºç²¾é€‰ï¼ˆ5ä¸ªï¼‰         â”‚
        â”‚  â€¢ å…¶ä»–åŒºåŸŸæ­£å¸¸æ˜¾ç¤º                         â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  ğŸ“ æ—¥å¿—: "âœ… åˆå§‹åŒ–åŠ è½½å®Œæˆ"               â”‚
        â”‚  âš¡ æ€§èƒ½: "loadUsers: XXms"                 â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  ğŸ‰ ç”¨æˆ·çœ‹åˆ°å®Œæ•´é¦–é¡µ                        â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”„ **å…¶ä»–è§¦å‘åœºæ™¯**

### åœºæ™¯2: ä¸‹æ‹‰åˆ·æ–°

```
ç”¨æˆ·ä¸‹æ‹‰å±å¹•
    â†“
RefreshControlè§¦å‘
    â†“
handleRefresh()æ‰§è¡Œ
    â”œâ”€â”€ ğŸ“ "ğŸ”„ ç”¨æˆ·è§¦å‘ä¸‹æ‹‰åˆ·æ–°"
    â”œâ”€â”€ setRefreshing(true)  â¬…ï¸ æ˜¾ç¤ºåˆ·æ–°åŠ¨ç”»
    â†“
Promise.all([loadUsers(), loadLimitedOffers()])
    â†“
é‡æ–°åŠ è½½æ•°æ®ï¼ˆæµç¨‹åŒä¸Šï¼‰
    â†“
setRefreshing(false)  â¬…ï¸ éšè—åˆ·æ–°åŠ¨ç”»
    â”œâ”€â”€ ğŸ“ "âœ… åˆ·æ–°å®Œæˆ"
```

### åœºæ™¯3: åˆ‡æ¢ç­›é€‰æ ‡ç­¾

```
ç”¨æˆ·ç‚¹å‡»"æ¨è"æ ‡ç­¾
    â†“
setActiveFilter('recommend')
    â”œâ”€â”€ ğŸ“ "ğŸ“ æ›´æ–°ç”¨æˆ·äº¤äº’çŠ¶æ€ {selectedFilter: 'recommend'}"
    â†“
useEffectç›‘å¬activeFilterå˜åŒ–
    â†“
è§¦å‘loadUsers() ï¼ˆä¾èµ–é¡¹å˜åŒ–ï¼‰
    â”œâ”€â”€ ğŸ“ "ğŸ”„ å¼€å§‹åŠ è½½ç”¨æˆ·åˆ—è¡¨ {filter: 'recommend'}"
    â†“
é‡æ–°åŠ è½½ç”¨æˆ·ï¼ˆæµç¨‹åŒä¸Šï¼‰
```

### åœºæ™¯4: æœç´¢

```
ç”¨æˆ·è¾“å…¥"é™ªç©"
    â†“
handleSearch('é™ªç©')
    â”œâ”€â”€ ğŸ“ "ğŸ” æœç´¢å…³é”®è¯å˜åŒ– {query: 'é™ªç©'}"
    â†“
300msé˜²æŠ–å»¶è¿Ÿ
    â†“
æ‰§è¡Œæœç´¢
    â”œâ”€â”€ ğŸ“ "ğŸ” æ‰§è¡Œæœç´¢"
    â”œâ”€â”€ ç­›é€‰usersæ•°ç»„
    â”œâ”€â”€ setUsers(filteredUsers)
    â””â”€â”€ ğŸ“ "âœ… æœ¬åœ°æœç´¢å®Œæˆ {count: 5}"
```

---

## ğŸ“¡ **APIè°ƒç”¨è¯¦ç»†æµç¨‹**

### homepageApiEnhanced.getUserList()

```
è°ƒç”¨APIæ–¹æ³•
    â†“
æ ¹æ®filterTabé€‰æ‹©ç­–ç•¥
    â”œâ”€â”€ nearby â†’ getNearbyUsers()
    â”œâ”€â”€ recommend â†’ getRecommendedUsers()
    â””â”€â”€ latest â†’ getLatestUsers()
    â†“
æ„å»ºè¯·æ±‚å‚æ•°
    â”œâ”€â”€ filterTab, region, page, limit
    â””â”€â”€ buildQueryParams()
    â†“
å‘é€HTTPè¯·æ±‚
    â”œâ”€â”€ ğŸ“ "[API] ğŸ” DEBUG ğŸŒ API GET /api/v1/..."
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ç­‰å¾…åç«¯å“åº”       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“           â†“           â†“
200 OK      404 Not Found   Network Error
    â†“           â†“           â†“
è§£æå“åº”    é™çº§æ–¹æ¡ˆ    é™çº§æ–¹æ¡ˆ
    â†“           â†“           â†“
UserDataAdapter.transformUserList()
    â”œâ”€â”€ UserProfileVO â†’ UserCard
    â”œâ”€â”€ å­—æ®µæ˜ å°„
    â””â”€â”€ æ ¼å¼åŒ–
    â†“
è¿”å›ApiResponse<UserListResponse>
    â”œâ”€â”€ data: { users, total, hasMore }
    â”œâ”€â”€ success: true/false
    â””â”€â”€ message: "success" / "error message"
```

---

## ğŸ¨ **æ•°æ®è½¬æ¢è¯¦è§£**

### åç«¯ â†’ å‰ç«¯å­—æ®µæ˜ å°„

```
åç«¯UserProfileVO              â†’    å‰ç«¯UserCard
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
userId: 123                    â†’    id: "123"
nickname: "å¼ ä¸‰"               â†’    username: "å¼ ä¸‰"
avatar: "http://..."           â†’    avatar: "http://..."
age: 25                        â†’    age: 25
bio: "ä¸ªäººç®€ä»‹"                â†’    bio: "ä¸ªäººç®€ä»‹"
occupations: [{name: "æ¨¡ç‰¹"}]  â†’    services: ["æ¨¡ç‰¹"]
onlineStatus: 1                â†’    status: "online"
location: "æ·±åœ³å¸‚å—å±±åŒº"       â†’    region: "æ·±åœ³å¸‚å—å±±åŒº"
isRealVerified: true           â†’    isRealVerified: true
stats: { followerCount: 100 }  â†’    stats: { followerCount: 100 }
```

### çŠ¶æ€æ˜ å°„

```
åç«¯onlineStatus    â†’    å‰ç«¯status
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
0 (ç¦»çº¿)            â†’    "offline"
1 (åœ¨çº¿)            â†’    "online"
2 (å¿™ç¢Œ)            â†’    "available"
3 (éšèº«)            â†’    "offline"
```

---

## ğŸ” **è°ƒè¯•æ—¥å¿—åˆ†ç±»**

### ğŸ¨ ç»„ä»¶ç”Ÿå‘½å‘¨æœŸ

```
ğŸ¬ MainPageç»„ä»¶å·²æŒ‚è½½
ğŸ¬ MainPageç»„ä»¶å·²å¸è½½
ğŸ“Š çŠ¶æ€æ›´æ–° {users: 20, loading: false}
```

### ğŸŒ APIè°ƒç”¨

```
ğŸ“¡ è°ƒç”¨API: getUserList
ğŸŒ API GET /api/v1/homepage/users/list
âœ… 200 /api/v1/homepage/users/list
âŒ 404 /api/v1/homepage/config
```

### ğŸ“¦ æ•°æ®åŠ è½½

```
ğŸ”„ å¼€å§‹åŠ è½½ç”¨æˆ·åˆ—è¡¨
âœ… APIåŠ è½½æˆåŠŸ {count: 20}
âš ï¸  APIè°ƒç”¨å¤±è´¥ï¼Œä½¿ç”¨é™çº§æ–¹æ¡ˆ
âœ… æ¨¡æ‹Ÿæ•°æ®åŠ è½½å®Œæˆ {count: 20}
```

### âš¡ æ€§èƒ½ç›‘æ§

```
ğŸš€ loadUsers: 176ms       (ä¼˜ç§€)
âš¡ loadUsers: 350ms       (è‰¯å¥½)
ğŸŒ loadUsers: 1200ms      (éœ€ä¼˜åŒ–)
```

### ğŸ§­ å¯¼èˆªè·³è½¬

```
ğŸ§­ å¯¼èˆª: é¦–é¡µ â†’ ç”¨æˆ·è¯¦æƒ… {userId: "1"}
ğŸ§­ å¯¼èˆª: é¦–é¡µ â†’ æœç´¢é¡µé¢
ğŸ§­ å¯¼èˆª: é¦–é¡µ â†’ ä½ç½®é€‰æ‹©
```

---

## ğŸ“± **å®é™…è¿è¡Œç¤ºä¾‹**

### Metroæ§åˆ¶å°è¾“å‡ºç¤ºä¾‹

```bash
$ npm start

 LOG  ================================
 LOG  ğŸš€ XYPaiåº”ç”¨å¯åŠ¨
 LOG  ç¯å¢ƒ: development
 LOG  API: http://localhost:8080
 LOG  ================================

 LOG  [22:30:15.123] [MainPage] âœ… INFO ğŸ¬ MainPageç»„ä»¶å·²æŒ‚è½½ 
      {initialFilter: undefined, initialRegion: undefined}

 LOG  ğŸ“‚ ğŸ“± é¦–é¡µåˆå§‹åŒ–æ•°æ®åŠ è½½

 LOG  [22:30:15.125] [useHomeState] âœ… INFO ğŸš€ å¼€å§‹åˆå§‹åŒ–åŠ è½½ 
      {activeFilter: "nearby", activeRegion: "å…¨éƒ¨", location: {city: "æ·±åœ³"}}

 LOG  [22:30:15.126] [useHomeState] âœ… INFO ğŸ”„ å¼€å§‹åŠ è½½ç”¨æˆ·åˆ—è¡¨ 
      {filter: "nearby", region: "å…¨éƒ¨"}

 LOG  [22:30:15.127] [useHomeState] ğŸ” DEBUG ğŸ“¡ è°ƒç”¨API: getUserList

 LOG  [22:30:15.128] [API] ğŸ” DEBUG ğŸŒ API GET /api/v1/homepage/users/list 
      {params: {filterTab: "nearby", page: 1, limit: 20}}

 WARN [22:30:15.500] [API] âš ï¸  WARN Network request failed

 WARN [22:30:15.501] [useHomeState] âš ï¸  WARN âš ï¸ APIè°ƒç”¨å¤±è´¥ï¼Œä½¿ç”¨é™çº§æ–¹æ¡ˆ 
      Network Error: connect ECONNREFUSED 127.0.0.1:8080

 LOG  [22:30:15.502] [useHomeState] âœ… INFO ğŸ”„ ä½¿ç”¨æ¨¡æ‹Ÿæ•°æ®ç”Ÿæˆç”¨æˆ·åˆ—è¡¨

 LOG  [22:30:16.002] [useHomeState] âœ… INFO âœ… æ¨¡æ‹Ÿæ•°æ®åŠ è½½å®Œæˆ 
      {count: 20}

 LOG  [22:30:16.003] [useHomeState] âš¡ PERFORMANCE âš¡ loadUsers: 877ms

 LOG  [22:30:15.310] [useHomeState] âœ… INFO ğŸ”„ å¼€å§‹åŠ è½½é™æ—¶ä¸“äº«ç”¨æˆ·

 LOG  [22:30:15.311] [useHomeState] ğŸ” DEBUG ğŸ“¡ è°ƒç”¨API: getFeaturedUsers

 WARN [22:30:15.650] [useHomeState] âš ï¸  WARN âš ï¸ ç²¾é€‰ç”¨æˆ·APIå¤±è´¥ï¼Œä½¿ç”¨é™çº§æ–¹æ¡ˆ

 LOG  [22:30:15.651] [useHomeState] âœ… INFO ğŸ”„ ä½¿ç”¨æ¨¡æ‹Ÿæ•°æ®ç”Ÿæˆç²¾é€‰ç”¨æˆ·

 LOG  [22:30:16.151] [useHomeState] âœ… INFO âœ… æ¨¡æ‹Ÿæ•°æ®åŠ è½½å®Œæˆ 
      {count: 5}

 LOG  [22:30:16.152] [useHomeState] âš¡ PERFORMANCE âš¡ loadLimitedOffers: 841ms

 LOG  [22:30:16.200] [useHomeState] âœ… INFO âœ… åˆå§‹åŒ–åŠ è½½å®Œæˆ

 LOG  [22:30:16.201] [MainPage] ğŸ“Š DEBUG ğŸ“Š çŠ¶æ€æ›´æ–° 
      {users: 20, limitedOffers: 5, loading: false, refreshing: false}

 LOG  ================================
 LOG  âœ… é¦–é¡µåŠ è½½å®Œæˆï¼Œç”¨æˆ·å¯ä»¥çœ‹åˆ°æ•°æ®
 LOG  æ€»è€—æ—¶: 1.1ç§’
 LOG  ================================
```

---

## ğŸ¯ **å…³é”®æ—¶é—´èŠ‚ç‚¹**

```
T+0ms     : ç”¨æˆ·æ‰“å¼€åº”ç”¨
T+100ms   : MainPageç»„ä»¶æŒ‚è½½
T+125ms   : useEffectè§¦å‘æ•°æ®åŠ è½½
T+127ms   : å¼€å§‹è°ƒç”¨åç«¯API
T+300ms   : åç«¯å“åº”ï¼ˆå¦‚æœæˆåŠŸï¼‰
T+500ms   : é™çº§æ–¹æ¡ˆæ‰§è¡Œï¼ˆå¦‚æœå¤±è´¥ï¼‰
T+1000ms  : æ•°æ®åŠ è½½å®Œæˆ
T+1100ms  : ç»„ä»¶é‡æ–°æ¸²æŸ“
T+1200ms  : ç”¨æˆ·çœ‹åˆ°å®Œæ•´é¡µé¢
```

**ç›®æ ‡**: æ€»åŠ è½½æ—¶é—´ < 2ç§’

---

## ğŸ”€ **é™çº§å†³ç­–æ ‘**

```
å¼€å§‹APIè°ƒç”¨
    â†“
å‘é€HTTPè¯·æ±‚
    â†“
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  åç«¯å“åº”æ£€æŸ¥   â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â†“
    â”Œâ”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”
    â†“           â†“
 HTTP 200    å…¶ä»–çŠ¶æ€ç 
    â†“           â†“
response.success?
    â†“           â†“
   Yes         No
    â†“           â†“
data.length > 0?
    â†“       â†“       â†“
   Yes     No   404/500/Timeout/NetworkError
    â†“       â†“       â†“
 âœ… ä½¿ç”¨   âš ï¸ é™çº§   âš ï¸ é™çº§
 çœŸå®æ•°æ®  æ–¹æ¡ˆ     æ–¹æ¡ˆ
    â†“       â†“       â†“
    â””â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”˜
           â†“
    ğŸ¯ è¿”å›æ•°æ®
    ï¼ˆçœŸå®æˆ–æ¨¡æ‹Ÿï¼‰
           â†“
    ç”¨æˆ·çœ‹åˆ°å†…å®¹
```

---

## ğŸ“Š **æ•°æ®æ¥æºå¯¹æ¯”**

### çœŸå®åç«¯æ•°æ®

```typescript
// ç‰¹å¾:
response = {
  data: {
    users: UserCard[],
    total: 100,        // â¬…ï¸ æœ‰totalå­—æ®µ
    hasMore: true,     // â¬…ï¸ æœ‰hasMoreå­—æ®µ
    pageNum: 1,
    pageSize: 20,
  },
  success: true,
  code: 200,
}

// æ—¥å¿—:
âœ… INFO âœ… APIåŠ è½½æˆåŠŸ {count: 20, total: 100, hasMore: true}
```

### æ¨¡æ‹Ÿæ•°æ®

```typescript
// ç‰¹å¾:
users = UserCard[]  // â¬…ï¸ ç›´æ¥æ˜¯æ•°ç»„
length = 20         // â¬…ï¸ å›ºå®š20ä¸ª

// æ—¥å¿—:
âœ… INFO âœ… æ¨¡æ‹Ÿæ•°æ®åŠ è½½å®Œæˆ {count: 20}
âš ï¸  WARN âš ï¸ APIè°ƒç”¨å¤±è´¥ï¼Œä½¿ç”¨é™çº§æ–¹æ¡ˆ
```

**å¦‚ä½•åˆ¤æ–­**:
- çœ‹æ—¥å¿—æœ‰æ—  âš ï¸ WARN
- çœ‹å“åº”æ•°æ®ç»“æ„

---

## ğŸ§ª **æµ‹è¯•åœºæ™¯**

### æµ‹è¯•1: æ­£å¸¸åŠ è½½ï¼ˆåç«¯å·²å¯åŠ¨ï¼‰

```bash
# 1. å¯åŠ¨åç«¯
cd RuoYi-Cloud-Plus
# å¯åŠ¨ç½‘å…³å’Œxypai-useræ¨¡å—

# 2. å¯åŠ¨å‰ç«¯
cd XiangYuPai-RNExpoAPP
npm start

# 3. æœŸæœ›æ—¥å¿—:
âœ… INFO ğŸ¬ MainPageç»„ä»¶å·²æŒ‚è½½
âœ… INFO ğŸš€ å¼€å§‹åˆå§‹åŒ–åŠ è½½
âœ… INFO ğŸ“¡ è°ƒç”¨API: getUserList
âœ… INFO âœ… APIåŠ è½½æˆåŠŸ         â¬…ï¸ å…³é”®ï¼šæˆåŠŸ
âš¡ PERFORMANCE ğŸš€ loadUsers: 176ms
âœ… INFO âœ… åˆå§‹åŒ–åŠ è½½å®Œæˆ

# 4. æœŸæœ›ç»“æœ:
é¡µé¢æ˜¾ç¤ºçœŸå®åç«¯æ•°æ®
```

### æµ‹è¯•2: é™çº§åŠ è½½ï¼ˆåç«¯æœªå¯åŠ¨ï¼‰

```bash
# 1. ä¸å¯åŠ¨åç«¯

# 2. å¯åŠ¨å‰ç«¯
npm start

# 3. æœŸæœ›æ—¥å¿—:
âœ… INFO ğŸ¬ MainPageç»„ä»¶å·²æŒ‚è½½
âœ… INFO ğŸš€ å¼€å§‹åˆå§‹åŒ–åŠ è½½
âœ… INFO ğŸ“¡ è°ƒç”¨API: getUserList
âš ï¸  WARN âš ï¸ APIè°ƒç”¨å¤±è´¥ï¼Œä½¿ç”¨é™çº§æ–¹æ¡ˆ  â¬…ï¸ å…³é”®ï¼šé™çº§
âœ… INFO ğŸ”„ ä½¿ç”¨æ¨¡æ‹Ÿæ•°æ®ç”Ÿæˆç”¨æˆ·åˆ—è¡¨
âœ… INFO âœ… æ¨¡æ‹Ÿæ•°æ®åŠ è½½å®Œæˆ
âœ… INFO âœ… åˆå§‹åŒ–åŠ è½½å®Œæˆ

# 4. æœŸæœ›ç»“æœ:
é¡µé¢æ˜¾ç¤ºæ¨¡æ‹Ÿæ•°æ®ï¼ˆä»ç„¶å¯ç”¨ï¼‰
```

### æµ‹è¯•3: ä¸‹æ‹‰åˆ·æ–°

```bash
# 1. åº”ç”¨å·²æ‰“å¼€

# 2. ç”¨æˆ·ä¸‹æ‹‰å±å¹•

# 3. æœŸæœ›æ—¥å¿—:
âœ… INFO ğŸ”„ ç”¨æˆ·è§¦å‘ä¸‹æ‹‰åˆ·æ–°
âœ… INFO ğŸ”„ å¼€å§‹åŠ è½½ç”¨æˆ·åˆ—è¡¨
âœ… INFO ğŸ”„ å¼€å§‹åŠ è½½é™æ—¶ä¸“äº«ç”¨æˆ·
âœ… INFO âœ… åˆ·æ–°å®Œæˆ

# 4. æœŸæœ›ç»“æœ:
åˆ·æ–°åŠ¨ç”» â†’ æ•°æ®æ›´æ–° â†’ åŠ¨ç”»æ¶ˆå¤±
```

---

## ğŸ“ **æ—¥å¿—çº§åˆ«è¯¦è§£**

### ğŸ” DEBUGï¼ˆå¼€å‘ç¯å¢ƒï¼‰

```
æ˜¾ç¤ºå†…å®¹:
- æ‰€æœ‰APIè°ƒç”¨
- æ‰€æœ‰å‚æ•°è¯¦æƒ…
- æ‰€æœ‰çŠ¶æ€å˜åŒ–
- æ€§èƒ½ç›‘æ§æ•°æ®

é€‚ç”¨åœºæ™¯:
- æœ¬åœ°å¼€å‘
- é—®é¢˜è°ƒè¯•
- æ€§èƒ½åˆ†æ
```

### âœ… INFOï¼ˆç”Ÿäº§ç¯å¢ƒï¼‰

```
æ˜¾ç¤ºå†…å®¹:
- å…³é”®æ“ä½œï¼ˆåŠ è½½ã€åˆ·æ–°ï¼‰
- æˆåŠŸæ¶ˆæ¯
- é‡è¦çŠ¶æ€å˜åŒ–

é€‚ç”¨åœºæ™¯:
- åŠŸèƒ½æµ‹è¯•
- æ­£å¸¸ç›‘æ§
```

### âš ï¸ WARNï¼ˆç”Ÿäº§ç¯å¢ƒï¼‰

```
æ˜¾ç¤ºå†…å®¹:
- é™çº§æ–¹æ¡ˆè§¦å‘
- éå…³é”®é”™è¯¯
- æ€§èƒ½è­¦å‘Š

é€‚ç”¨åœºæ™¯:
- å¼‚å¸¸ç›‘æ§
- é™çº§è¿½è¸ª
```

### ğŸš¨ ERRORï¼ˆç”Ÿäº§ç¯å¢ƒï¼‰

```
æ˜¾ç¤ºå†…å®¹:
- ä¸¥é‡é”™è¯¯
- å´©æºƒé£é™©
- éœ€è¦å¤„ç†çš„å¼‚å¸¸

é€‚ç”¨åœºæ™¯:
- é”™è¯¯è¿½è¸ª
- æ•…éšœæ’æŸ¥
```

---

## ğŸ **å¿«æ·è°ƒè¯•å‘½ä»¤**

### åœ¨React Native Debuggeræ§åˆ¶å°æ‰§è¡Œ

```javascript
// 1. æ‰‹åŠ¨è§¦å‘åŠ è½½
const { loadUsers, loadLimitedOffers } = require('@/src/features/Homepage/MainPage/useHomeState');
loadUsers();
loadLimitedOffers();

// 2. æŸ¥çœ‹StoreçŠ¶æ€
const store = require('@/stores/homepageStore').useHomepageStore.getState();
console.log('StoreçŠ¶æ€:', store);

// 3. ç›´æ¥è°ƒç”¨API
const api = require('@/services/api/homepageApiEnhanced').default;
api.getUserList({ filterTab: 'nearby', page: 1, limit: 20 })
  .then(res => console.log('âœ… APIç»“æœ:', res))
  .catch(err => console.error('âŒ APIé”™è¯¯:', err));

// 4. æ¸…é™¤ç¼“å­˜
api.clearHomepageCache();
console.log('ğŸ§¹ ç¼“å­˜å·²æ¸…é™¤');

// 5. æµ‹è¯•æ•°æ®è½¬æ¢
const adapter = require('@/services/api/adapters/userAdapter').UserDataAdapter;
const mockProfile = { userId: 1, nickname: 'æµ‹è¯•', /* ... */ };
const userCard = adapter.transformUserProfile(mockProfile);
console.log('è½¬æ¢ç»“æœ:', userCard);
```

---

## ğŸŠ **å…³é”®æç¤º**

### âœ¨ **é‡è¦ä¿¡æ¯**

1. âœ… **æ•°æ®ä¼šè‡ªåŠ¨åŠ è½½** - useEffectåœ¨ç»„ä»¶æŒ‚è½½æ—¶è§¦å‘
2. âœ… **é™çº§å®Œå…¨è‡ªåŠ¨** - APIå¤±è´¥æ—¶è‡ªåŠ¨ä½¿ç”¨æ¨¡æ‹Ÿæ•°æ®
3. âœ… **æ—¥å¿—éå¸¸è¯¦ç»†** - æ¯ä¸ªæ­¥éª¤éƒ½æœ‰æ—¥å¿—è¾“å‡º
4. âœ… **æ€§èƒ½è‡ªåŠ¨ç›‘æ§** - æ‰€æœ‰æ“ä½œéƒ½è®°å½•è€—æ—¶
5. âœ… **æ— éœ€æ‰‹åŠ¨è§¦å‘** - è¿›å…¥é¡µé¢è‡ªåŠ¨å¼€å§‹åŠ è½½

### ğŸ¯ **æŸ¥çœ‹æ—¥å¿—çš„æœ€å¿«æ–¹æ³•**

```bash
npm start
# ç„¶åç›´æ¥çœ‹ç»ˆç«¯è¾“å‡ºï¼Œæœç´¢ï¼š
- "åˆå§‹åŒ–åŠ è½½" â†’ æŸ¥çœ‹åŠ è½½æµç¨‹
- "ERROR" â†’ æŸ¥çœ‹é”™è¯¯
- "API" â†’ æŸ¥çœ‹APIè°ƒç”¨
```

---

**åˆ›å»ºæ—¶é—´**: 2025-10-22  
**ç”¨é€”**: å¿«é€Ÿç†è§£æ•°æ®åŠ è½½æµç¨‹

ğŸ‰ **æ•°æ®åŠ è½½æ˜¯å…¨è‡ªåŠ¨çš„ï¼Œä½ åªéœ€è¦æŸ¥çœ‹æ—¥å¿—ç¡®è®¤å³å¯ï¼**



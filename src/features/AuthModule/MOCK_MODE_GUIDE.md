# 登录模块 - 前端模拟模式说明

## 📋 概述

登录模块已修改为**前端模拟模式**，所有真实API调用已被注释，使用假数据进行模拟登录。

## ✅ 已修改的文件

### 1. `stores/authStore.ts`
**修改内容：**
- ✅ 注释掉所有真实后端API导入
- ✅ `login()` 方法：使用假数据模拟登录，任何密码/验证码都可通过
- ✅ `logout()` 方法：模拟登出操作
- ✅ `refreshAuthToken()` 方法：生成新的模拟token

**模拟行为：**
```typescript
// 密码登录：任何 >= 6位的密码都可以登录成功
// 验证码登录：任何 6位数字都可以登录成功
// 生成模拟数据：
{
  id: `mock_user_${timestamp}`,
  phone: credentials.phone,
  nickname: `测试用户_${phone后4位}`,
  avatar: 'https://via.placeholder.com/150',
  verified: true,
  token: `mock_access_token_${timestamp}`,
  refreshToken: `mock_refresh_token_${timestamp}`,
}
```

### 2. `LoginMainPage/index.tsx`
**修改内容：**
- ✅ 注释掉真实后端API导入
- ✅ `handleSendCode()` 方法：模拟发送验证码（800ms延迟后成功）

**模拟行为：**
```typescript
// 发送验证码：总是成功
// 延迟：800ms
// 提示用户：任何6位数字都可以登录
```

## 🎯 使用方式

### 密码登录
1. 输入任意11位手机号（如：`13800138000`）
2. 输入任意 >= 6位的密码（如：`123456`）
3. 点击"登录"按钮
4. ✅ 登录成功，跳转到首页

### 验证码登录
1. 输入任意11位手机号（如：`13800138000`）
2. 点击"获取验证码"（会显示提示：任何6位数字均可登录）
3. 输入任意6位数字（如：`123456`）
4. 点击"登录"按钮
5. ✅ 登录成功，跳转到首页

## 🔄 恢复真实API

如需恢复使用真实后端API，只需：

### 1. `stores/authStore.ts`
取消注释以下代码段：
- 第14-15行：后端API导入
- 第144-187行：真实的登录API调用
- 第274-282行：真实的登出API调用
- 第330-366行：真实的token刷新API调用

并删除对应的假数据模拟代码。

### 2. `LoginMainPage/index.tsx`
取消注释以下代码段：
- 第58行：后端API导入
- 第224-229行：真实的发送验证码API调用

并删除对应的假数据模拟代码。

## 📝 注意事项

1. **假数据特征**：
   - 所有token都以 `mock_` 开头
   - 用户ID格式：`mock_user_{timestamp}`
   - 用户昵称格式：`测试用户_{phone后4位}`

2. **凭证保存**：
   - 登录成功后仍会保存凭证到 SecureStore
   - 下次打开应用会显示"快速登录"功能
   - 可以正常测试"快速登录"和"使用其他账号"功能

3. **控制台日志**：
   - 所有模拟操作都有详细的控制台日志
   - 日志中会标注"（前端模拟登录 - 假数据）"

4. **错误处理**：
   - 仍然会验证基本格式（手机号11位、密码>=6位、验证码6位）
   - 格式不正确会显示错误提示

## 🚀 测试建议

推荐的测试场景：
- ✅ 密码登录流程
- ✅ 验证码登录流程
- ✅ 发送验证码功能（倒计时）
- ✅ 快速登录功能
- ✅ 使用其他账号登录
- ✅ 表单验证（错误提示）
- ✅ 登出功能

---

**最后更新时间：** 2025-11-08
**修改人：** AI Assistant

